module.exports=[1108,a=>{"use strict";a.s(["default",()=>n]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(49863),f=a.i(99570),g=a.i(91119),h=a.i(67453),i=a.i(96221),j=a.i(92e3),k=a.i(24669),l=a.i(3314),m=a.i(1027);function n(){let a=(0,d.useRouter)(),{user:n}=(0,e.useUser)(),[o,p]=(0,c.useState)("welcome"),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null);(0,c.useEffect)(()=>{if("welcome"===o){let a=setTimeout(()=>{G()},2e3);return()=>clearTimeout(a)}},[o]),(0,c.useEffect)(()=>{if("connect"===o&&w){let a=setInterval(()=>{K()},3e3);return()=>clearInterval(a)}},[o,w]);let G=async()=>{r(!0),t(null);try{let a=await fetch("/api/snaptrade/register",{method:"POST"}),b=await a.json();if(!b.success)throw Error(b.error||"Failed to register with SnapTrade");v(b.data.userId),p("register"),setTimeout(()=>{H()},1500)}catch(a){t(a instanceof Error?a.message:"Registration failed")}finally{r(!1)}},H=async()=>{r(!0),t(null);try{let a=await fetch("/api/snaptrade/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({immediateRedirect:!0,connectionType:"trade"})}),b=await a.json();if(!b.success)throw Error(b.error||"Failed to generate connection URL");x(b.data.redirectUri),p("connect")}catch(a){t(a instanceof Error?a.message:"Connection failed")}finally{r(!1)}},I=()=>{z([]),B([]),D(null),p("role-selection")},J=()=>{if(!w)return;let a=window.screen.width/2-400,b=window.screen.height/2-300;window.open(w,"SnapTrade Connection",`width=800,height=600,left=${a},top=${b}`)},K=async()=>{try{let a=await fetch("/api/snaptrade/accounts"),b=await a.json();b.success&&b.data.hasConnectedAccounts&&(z(b.data.accounts),B(b.data.authorizations||[]),p("select-account"))}catch(a){console.error("Error checking accounts:",a)}},L=async()=>{if(C){r(!0),t(null);try{let a=y.find(a=>a.id===C);if(!a)throw Error("Account not found");let b=A.length>0?A[0].id:a.id,c=await fetch("/api/snaptrade/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:a.id,authorizationId:b})}),d=await c.json();if(!d.success)throw Error(d.error||"Failed to select account");p("role-selection")}catch(a){t(a instanceof Error?a.message:"Account selection failed")}finally{r(!1)}}},M=async()=>{if(E){r(!0),t(null);try{let b=await fetch("/api/user/role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:E})}),c=await b.json();if(!c.success)throw Error(c.error||"Failed to set role");p("complete"),setTimeout(()=>{"leader"===E?a.push("/leader"):a.push("/dashboard")},2e3)}catch(a){t(a instanceof Error?a.message:"Role selection failed")}finally{r(!1)}}};return(0,b.jsx)("div",{className:"min-h-screen bg-[var(--background)] flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsx)(g.Card,{className:"border-2",children:(0,b.jsxs)(g.CardContent,{className:"p-8",children:[s&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-[var(--danger-bg)] border border-[var(--danger)] rounded-lg flex items-start gap-3",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-[var(--danger)] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-[var(--foreground)]",children:"Error"}),(0,b.jsx)("p",{className:"text-sm text-[var(--foreground-secondary)]",children:s})]})]}),(()=>{switch(o){case"welcome":return(0,b.jsxs)("div",{className:"text-center space-y-6",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[var(--primary)] bg-opacity-10",children:(0,b.jsx)(k.TrendingUp,{className:"w-8 h-8 text-[var(--primary)]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to TradeOS!"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Let's get you set up in just a few steps"})]}),(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(i.Loader2,{className:"w-6 h-6 animate-spin text-[var(--primary)]"})})]});case"register":return(0,b.jsxs)("div",{className:"text-center space-y-6",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-16 h-16 mx-auto text-[var(--success)]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Account Created!"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Preparing your brokerage connection..."})]}),(0,b.jsx)(i.Loader2,{className:"w-6 h-6 mx-auto animate-spin text-[var(--primary)]"})]});case"connect":return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l.Shield,{className:"w-16 h-16 mx-auto mb-4 text-[var(--primary)]"}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Connect Your Brokerage"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)] mb-6",children:"Securely link your brokerage account to start trading"})]}),(0,b.jsx)(g.Card,{className:"border-2 border-dashed",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Bank-level encryption"}),(0,b.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Your credentials are never stored on our servers"})]})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Read-only access option"}),(0,b.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Choose between read-only or full trading permissions"})]})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Revoke anytime"}),(0,b.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Disconnect your account at any time from settings"})]})]})]})})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(f.Button,{onClick:J,disabled:!w,className:"w-full",size:"lg",children:w?"Connect Brokerage Account":"Generating Connection..."}),(0,b.jsx)(f.Button,{onClick:I,variant:"outline",className:"w-full",size:"lg",children:"Skip for now - I'll connect later"})]}),w&&(0,b.jsx)("p",{className:"text-xs text-center text-[var(--foreground-muted)]",children:"A new window will open. Return here after connecting your account."}),(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,b.jsx)(j.AlertCircle,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[(0,b.jsx)("strong",{children:"Note:"})," Trading features require a connected brokerage account. You can connect one later from your dashboard settings."]})]})]});case"select-account":return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Accounts Connected!"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Select your primary trading account"})]}),(0,b.jsx)("div",{className:"space-y-3",children:y.map(a=>(0,b.jsx)(g.Card,{className:`cursor-pointer transition-all ${C===a.id?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"}`,onClick:()=>D(a.id),children:(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.meta?.institution_name||a.name}),(0,b.jsxs)("p",{className:"text-sm text-[var(--foreground-muted)]",children:[a.type," •••",a.number?.slice(-4)]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-bold",children:["$",a.balance?.total?.amount?.toLocaleString()||"0.00"]}),(0,b.jsx)("p",{className:"text-xs text-[var(--foreground-muted)]",children:a.balance?.total?.currency||"USD"})]})]})})},a.id))}),(0,b.jsx)(f.Button,{onClick:L,disabled:!C||q,className:"w-full",size:"lg",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Continue"})]});case"role-selection":return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(m.Zap,{className:"w-16 h-16 mx-auto mb-4 text-[var(--primary)]"}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Path"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"How do you want to use TradeOS?"})]}),0===y.length&&(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,b.jsx)(j.AlertCircle,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:"You haven't connected a brokerage account yet. You can still select your role and connect an account later from your settings to enable trading features."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)(g.Card,{className:`cursor-pointer transition-all ${"leader"===E?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"}`,onClick:()=>F("leader"),children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.TrendingUp,{className:"w-5 h-5"}),"Leader"]}),(0,b.jsx)(g.CardDescription,{children:"Share your trades with followers"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Trade freely and earn from followers"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Build your trading reputation"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Access advanced analytics"})]})]})})]}),(0,b.jsxs)(g.Card,{className:`cursor-pointer transition-all ${"follower"===E?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"}`,onClick:()=>F("follower"),children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Shield,{className:"w-5 h-5"}),"Follower"]}),(0,b.jsx)(g.CardDescription,{children:"Copy successful traders automatically"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Automated trade copying"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Risk management controls"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,b.jsx)("span",{children:"Follow multiple leaders"})]})]})})]})]}),(0,b.jsx)(f.Button,{onClick:M,disabled:!E||q,className:"w-full",size:"lg",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Setting up..."]}):"Complete Setup"})]});case"complete":return(0,b.jsxs)("div",{className:"text-center space-y-6",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-20 h-20 mx-auto text-[var(--success)]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"All Set!"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Redirecting you to your dashboard..."})]}),(0,b.jsx)(i.Loader2,{className:"w-6 h-6 mx-auto animate-spin text-[var(--primary)]"})]});default:return null}})(),(0,b.jsx)("div",{className:"mt-8 flex items-center justify-center gap-2",children:["welcome","register","connect","select-account","role-selection","complete"].map((a,c)=>(0,b.jsx)("div",{className:`h-2 rounded-full transition-all ${a===o?"w-8 bg-[var(--primary)]":c<["welcome","register","connect","select-account","role-selection","complete"].indexOf(o)?"w-2 bg-[var(--primary)]":"w-2 bg-[var(--border)]"}`},a))})]})})})})}}];

//# sourceMappingURL=src_app_%28authenticated%29_onboarding_page_tsx_e76a8515._.js.map