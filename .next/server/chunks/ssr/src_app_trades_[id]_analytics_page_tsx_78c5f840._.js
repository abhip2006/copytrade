module.exports=[74254,a=>{"use strict";a.s(["default",()=>E]);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(99570),f=a.i(51620),g=a.i(24669),h=a.i(53277),i=a.i(41710),j=a.i(90166),k=a.i(50429),l=a.i(90669),m=a.i(39761),n=a.i(210),o=a.i(69520),p=a.i(84505),q=a.i(67453),r=a.i(62722),s=a.i(92e3),t=a.i(23312),u=a.i(21161),v=a.i(68114),w=a.i(77137),x=a.i(39622),y=a.i(85811),z=a.i(58042),A=a.i(94222),B=a.i(54419),C=a.i(59854),D=a.i(48662);function E({params:a}){var E;let F=(0,c.use)(a),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!0),[K,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{M()},[F.id]);let M=async()=>{try{J(!0),L(null);let a=await fetch(`/api/trades/${F.id}/analytics`),b=await a.json();if(!b.success)throw Error(b.error||"Failed to fetch analytics");H(b.data)}catch(a){console.error("Error fetching analytics:",a),L(a instanceof Error?a.message:"Failed to load analytics")}finally{J(!1)}},N=a=>{if(!a)return"-";if(a<1)return`${Math.round(60*a)} minutes`;if(a<24)return`${Math.round(a)} hours`;let b=Math.floor(a/24),c=Math.round(a%24);return c>0?`${b}d ${c}h`:`${b} days`},O=G?[{time:"Entry",price:G.entryPrice},{time:"+1h",price:1.005*G.entryPrice},{time:"+2h",price:.998*G.entryPrice},{time:"+4h",price:1.012*G.entryPrice},{time:"Current",price:G.currentPrice||G.exitPrice||G.entryPrice}]:[];return(G&&(G.grossPL,G.fees),I)?(0,b.jsx)("div",{className:"min-h-screen bg-[var(--background)] flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(o.RefreshCw,{className:"w-8 h-8 animate-spin text-[var(--primary)]"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Loading trade analytics..."})]})}):K||!G?(0,b.jsx)("div",{className:"min-h-screen bg-[var(--background)] flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4 max-w-md text-center",children:[(0,b.jsx)(s.AlertCircle,{className:"w-12 h-12 text-[var(--danger)]"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-[var(--foreground)]",children:"Failed to Load Analytics"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:K||"Trade not found"}),(0,b.jsx)(d.default,{href:"/dashboard/trades",children:(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4"}),"Back to Trades"]})})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-[var(--background)]",children:[(0,b.jsx)("div",{className:"border-b border-[var(--border)] bg-[var(--surface)] sticky top-0 z-40",children:(0,b.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.default,{href:"/dashboard",className:"flex items-center gap-2",children:(0,b.jsx)(w.TradeOSLogoCompact,{})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:M,children:(0,b.jsx)(o.RefreshCw,{className:"w-5 h-5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(t.Bell,{className:"w-5 h-5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(u.Settings,{className:"w-5 h-5"})})]})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)(d.default,{href:"/dashboard/trades",className:"text-sm text-[var(--foreground-muted)] hover:text-[var(--foreground)] mb-4 inline-flex items-center gap-2",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4"}),"Back to Trade History"]}),(0,b.jsxs)("div",{className:"flex items-start justify-between mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold",children:(0,b.jsx)("span",{className:"gradient-text",children:G.symbol})}),"EXECUTED"===(E=G.status)?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-[var(--success-bg)] text-[var(--success)] text-sm font-medium",children:[(0,b.jsx)(q.CheckCircle2,{className:"w-4 h-4"}),"Executed"]}):"FAILED"===E||"REJECTED"===E?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-[var(--danger-bg)] text-[var(--danger)] text-sm font-medium",children:[(0,b.jsx)(r.XCircle,{className:"w-4 h-4"}),"Failed"]}):(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-[var(--info-bg)] text-[var(--info)] text-sm font-medium",children:[(0,b.jsx)(i.Clock,{className:"w-4 h-4"}),E]}),(0,b.jsxs)("span",{className:(0,v.cn)("inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium","BUY"===G.action?"bg-[var(--success-bg)] text-[var(--success)]":"bg-[var(--danger-bg)] text-[var(--danger)]"),children:["BUY"===G.action?(0,b.jsx)(g.TrendingUp,{className:"w-4 h-4"}):(0,b.jsx)(h.TrendingDown,{className:"w-4 h-4"}),G.action]})]}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:G.description})]}),(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(p.Download,{className:"w-5 h-5"}),"Export Report"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,b.jsx)(f.StatCard,{label:void 0!==G.netPL?"Net P&L":"Unrealized P&L",value:(0,v.formatCurrency)(G.netPL||G.unrealizedPL||0),icon:void 0!==G.netPL&&G.netPL>=0?g.TrendingUp:h.TrendingDown,trend:void 0!==G.netPL&&G.netPL>=0?"up":"down",subtitle:`${void 0!==G.returnPercent?(0,v.formatPercent)(G.returnPercent):"-"} return`}),(0,b.jsx)(f.StatCard,{label:"Entry Value",value:(0,v.formatCurrency)(G.entryValue),icon:j.DollarSign,subtitle:`${G.units.toLocaleString()} units @ ${(0,v.formatCurrency)(G.entryPrice)}`}),(0,b.jsx)(f.StatCard,{label:"Current Value",value:(0,v.formatCurrency)(G.currentValue||G.exitValue||0),icon:k.Target,subtitle:`${(0,v.formatCurrency)(G.currentPrice||G.exitPrice||0)} per unit`}),(0,b.jsx)(f.StatCard,{label:"Hold Duration",value:N(G.holdDuration),icon:i.Clock,subtitle:`${G.marketHours?"Market hours":"Extended hours"}`})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-4",children:"Price Movement"}),(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(x.AreaChart,{data:O,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"priceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"rgb(var(--primary))",stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:"rgb(var(--primary))",stopOpacity:0})]})}),(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--border)"}),(0,b.jsx)(z.XAxis,{dataKey:"time",stroke:"var(--foreground-muted)",style:{fontSize:"12px"}}),(0,b.jsx)(A.YAxis,{stroke:"var(--foreground-muted)",style:{fontSize:"12px"},tickFormatter:a=>`$${a.toFixed(2)}`}),(0,b.jsx)(C.Tooltip,{contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px"},formatter:a=>[`$${a.toFixed(2)}`,"Price"]}),(0,b.jsx)(y.Area,{type:"monotone",dataKey:"price",stroke:"rgb(var(--primary))",fill:"url(#priceGradient)",strokeWidth:2})]})})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-4",children:"P&L Breakdown"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg bg-[var(--surface-elevated)]",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Gross P&L"}),(0,b.jsx)("span",{className:(0,v.cn)("text-lg font-semibold",(G.grossPL||0)>=0?"text-[var(--success)]":"text-[var(--danger)]"),children:(0,v.formatCurrency)(G.grossPL||0)})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg bg-[var(--surface-elevated)]",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Fees"}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-[var(--danger)]",children:["-",(0,v.formatCurrency)(G.fees)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg bg-[var(--primary-bg)] border-2 border-[var(--primary)]",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:"Net P&L"}),(0,b.jsx)("span",{className:(0,v.cn)("text-xl font-bold",(G.netPL||G.unrealizedPL||0)>=0?"text-[var(--success)]":"text-[var(--danger)]"),children:(0,v.formatCurrency)(G.netPL||G.unrealizedPL||0)})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 flex items-center gap-2",children:[(0,b.jsx)(l.Activity,{className:"w-5 h-5 text-[var(--primary)]"}),"Execution Quality"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Order Type"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.orderType})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Fill Rate"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:(0,v.formatPercent)(G.fillRate)})]}),null!==G.slippage&&void 0!==G.slippage&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Slippage"}),(0,b.jsx)("span",{className:(0,v.cn)("text-sm font-semibold",.5>Math.abs(G.slippage)?"text-[var(--success)]":"text-[var(--warning)]"),children:(0,v.formatPercent)(G.slippage)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Execution Time"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.executionTime?`${Math.round(G.executionTime)}s`:"-"})]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 flex items-center gap-2",children:[(0,b.jsx)(m.BarChart3,{className:"w-5 h-5 text-[var(--primary)]"}),"Position Sizing"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Position Size"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.positionSizePercent?(0,v.formatPercent)(G.positionSizePercent):"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Entry Value"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:(0,v.formatCurrency)(G.entryValue)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Portfolio Value"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.portfolioValueAtEntry?(0,v.formatCurrency)(G.portfolioValueAtEntry):"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Units"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.units.toLocaleString()})]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 flex items-center gap-2",children:[(0,b.jsx)(i.Clock,{className:"w-5 h-5 text-[var(--primary)]"}),"Time Metrics"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Entry Date"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:new Date(G.entryDate).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Entry Time"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:new Date(G.entryDate).toLocaleTimeString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Hold Duration"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:N(G.holdDuration)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--foreground-muted)]",children:"Market Hours"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-[var(--foreground)]",children:G.marketHours?"Yes":"No"})]})]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--surface)] p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[var(--foreground)] mb-6",children:"Trade Timeline"}),(0,b.jsxs)("div",{className:"relative pl-8",children:[(0,b.jsx)("div",{className:"absolute left-2 top-0 bottom-0 w-0.5 bg-[var(--border)]"}),(0,b.jsxs)("div",{className:"relative mb-8",children:[(0,b.jsx)("div",{className:"absolute -left-[21px] w-5 h-5 rounded-full bg-[var(--success)] flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-[var(--foreground)] mb-1",children:"Order Placed"}),(0,b.jsx)("p",{className:"text-xs text-[var(--foreground-muted)] mb-2",children:new Date(G.entryDate).toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-[var(--foreground-secondary)]",children:[G.action," ",G.units," units of ",G.symbol," @ ",(0,v.formatCurrency)(G.entryPrice)]})]})]}),G.exitDate&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -left-[21px] w-5 h-5 rounded-full bg-[var(--primary)] flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-[var(--foreground)] mb-1",children:"Order Executed"}),(0,b.jsx)("p",{className:"text-xs text-[var(--foreground-muted)] mb-2",children:new Date(G.exitDate).toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-[var(--foreground-secondary)]",children:["Filled @ ",(0,v.formatCurrency)(G.exitPrice||0)]})]})]})]})]})]})]})}}];

//# sourceMappingURL=src_app_trades_%5Bid%5D_analytics_page_tsx_78c5f840._.js.map