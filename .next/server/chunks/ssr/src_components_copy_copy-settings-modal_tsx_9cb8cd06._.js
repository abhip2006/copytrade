module.exports=[28330,a=>{"use strict";a.s(["CopySettingsModal",()=>o],28330);var b=a.i(87924),c=a.i(72131),d=a.i(33508),e=a.i(24669),f=a.i(90166),g=a.i(3314),h=a.i(92e3);let i=(0,a.i(70106).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var j=a.i(67453),k=a.i(99570),l=a.i(91119);let m=[{id:"fixed_amount",name:"Fixed Amount",description:"Copy each trade with a fixed dollar amount",example:"$100 per trade",icon:f.DollarSign},{id:"percentage",name:"Portfolio Percentage",description:"Use a percentage of your portfolio for each trade",example:"5% of your portfolio",icon:e.TrendingUp},{id:"proportional",name:"Proportional",description:"Match the leader's position size relative to their portfolio",example:"If leader uses 10% of their portfolio, you use 10%",icon:g.Shield},{id:"multiplier",name:"Multiplier",description:"Multiply the leader's trade size by a factor",example:"0.5x = half the leader's position",icon:e.TrendingUp}],n=[{id:"stocks",name:"Stocks",description:"Individual company stocks"},{id:"etf",name:"ETFs",description:"Exchange-traded funds"},{id:"options",name:"Options",description:"Options contracts"},{id:"crypto",name:"Crypto",description:"Cryptocurrencies"}];function o({leaderId:a,leaderName:e,isOpen:f,onClose:g,onSuccess:o,existingSettings:p}){let[q,r]=(0,c.useState)("allocation"),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)("fixed_amount"),[y,z]=(0,c.useState)(100),[A,B]=(0,c.useState)(1e3),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(["stocks","etf"]),[O,P]=(0,c.useState)(10),[Q,R]=(0,c.useState)(!1);(0,c.useEffect)(()=>{p&&(x(p.allocation_type),z(p.allocation_value),B(p.max_position_size||1e3),D(p.stop_copying_on_loss||null),F(p.copy_stop_loss),H(p.copy_take_profit),J(p.custom_stop_loss||null),L(p.custom_take_profit||null),N(p.asset_classes),P(p.max_risk_per_trade||10),R(p.trailing_stop||!1))},[p]);let S=async()=>{t(!0),v(null),r("processing");try{let b=await fetch("/api/copy/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leader_id:a,allocation_type:w,allocation_value:y,max_position_size:A,stop_copying_on_loss:C||void 0,copy_stop_loss:E,copy_take_profit:G,custom_stop_loss:I||void 0,custom_take_profit:K||void 0,asset_classes:M,max_risk_per_trade:O,trailing_stop:Q})}),c=await b.json();if(!c.success)throw Error(c.error||"Failed to save settings");setTimeout(()=>{o?.(),g()},1500)}catch(a){v(a instanceof Error?a.message:"Failed to save settings"),r("review")}finally{t(!1)}},T=()=>{switch(w){case"fixed_amount":return`You'll invest $${y} in each trade`;case"percentage":return`${y}% of your portfolio per trade`;case"proportional":return`Match leader's position sizing (${y}x factor)`;case"multiplier":return`${y}x the leader's trade size`}};return f?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-[var(--surface)] rounded-2xl border border-[var(--border)] shadow-2xl",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-[var(--surface)] border-b border-[var(--border)] p-6 z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Copy Settings"}),(0,b.jsxs)("p",{className:"text-sm text-[var(--muted-foreground)] mt-1",children:["Configure how you'll copy ",e]})]}),(0,b.jsx)("button",{onClick:g,className:"p-2 rounded-lg hover:bg-[var(--accent)] transition-colors",disabled:s,children:(0,b.jsx)(d.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"mt-6 flex items-center gap-2",children:["allocation","risk","assets","review"].map((a,c)=>(0,b.jsx)("div",{className:`h-1 flex-1 rounded-full transition-all ${["allocation","risk","assets","review"].indexOf(q)>=c?"bg-[var(--primary)]":"bg-[var(--border)]"}`},a))})]}),(0,b.jsxs)("div",{className:"p-6",children:[u&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,b.jsx)(h.AlertCircle,{className:"w-5 h-5 text-red-500 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-red-900",children:"Error"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:u})]})]}),"allocation"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Choose Allocation Strategy"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(a=>{let c=a.icon;return(0,b.jsx)(l.Card,{className:`cursor-pointer transition-all p-4 ${w===a.id?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"}`,onClick:()=>x(a.id),children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(c,{className:"w-5 h-5 text-[var(--primary)] mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mt-1",children:a.description}),(0,b.jsx)("p",{className:"text-xs text-[var(--primary)] mt-2",children:a.example})]})]})},a.id)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["fixed_amount"===w&&"Amount per Trade ($)","percentage"===w&&"Portfolio Percentage (%)","proportional"===w&&"Proportional Factor","multiplier"===w&&"Multiplier"]}),(0,b.jsx)("input",{type:"number",value:y,onChange:a=>z(parseFloat(a.target.value)),className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none",min:"0",step:"fixed_amount"===w?"10":"0.1"}),(0,b.jsxs)("p",{className:"text-sm text-[var(--muted-foreground)] mt-2",children:[(0,b.jsx)(i,{className:"w-4 h-4 inline mr-1"}),T()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Maximum Position Size ($)"}),(0,b.jsx)("input",{type:"number",value:A,onChange:a=>B(parseFloat(a.target.value)),className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none",min:"0",step:"100"}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mt-2",children:"Maximum dollar amount for any single position"})]}),(0,b.jsx)(k.Button,{onClick:()=>r("risk"),className:"w-full",size:"lg",children:"Continue to Risk Management"})]}),"risk"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Risk Management"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("input",{type:"checkbox",checked:E,onChange:a=>F(a.target.checked),className:"w-4 h-4 rounded border-[var(--border)]"}),(0,b.jsx)("span",{className:"font-medium",children:"Copy leader's stop-loss"})]}),!E&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Custom Stop-Loss (%)"}),(0,b.jsx)("input",{type:"number",value:I||"",onChange:a=>J(parseFloat(a.target.value)||null),placeholder:"e.g., -5 for 5% loss",className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("input",{type:"checkbox",checked:G,onChange:a=>H(a.target.checked),className:"w-4 h-4 rounded border-[var(--border)]"}),(0,b.jsx)("span",{className:"font-medium",children:"Copy leader's take-profit"})]}),!G&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Custom Take-Profit (%)"}),(0,b.jsx)("input",{type:"number",value:K||"",onChange:a=>L(parseFloat(a.target.value)||null),placeholder:"e.g., 10 for 10% profit",className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Stop Copying After Loss (%)"}),(0,b.jsx)("input",{type:"number",value:C||"",onChange:a=>D(parseFloat(a.target.value)||null),placeholder:"e.g., -20 to stop after 20% loss",className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none"}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mt-2",children:"Automatically stop copying if your total loss reaches this percentage"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Maximum Risk Per Trade (%)"}),(0,b.jsx)("input",{type:"number",value:O,onChange:a=>P(parseFloat(a.target.value)),className:"w-full px-4 py-2 rounded-lg border border-[var(--border)] bg-[var(--background)] focus:border-[var(--primary)] focus:outline-none",min:"0",max:"100",step:"1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:Q,onChange:a=>R(a.target.checked),className:"w-4 h-4 rounded border-[var(--border)]"}),(0,b.jsx)("span",{className:"font-medium",children:"Enable trailing stop-loss"})]}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mt-2 ml-6",children:"Automatically adjust stop-loss as position moves in profit"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(k.Button,{onClick:()=>r("allocation"),variant:"outline",className:"flex-1",children:"Back"}),(0,b.jsx)(k.Button,{onClick:()=>r("assets"),className:"flex-1",children:"Continue"})]})]}),"assets"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Asset Classes to Copy"}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mb-4",children:"Select which types of trades you want to copy"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(a=>(0,b.jsx)(l.Card,{className:`cursor-pointer transition-all p-4 ${M.includes(a.id)?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"}`,onClick:()=>{var b;return b=a.id,void N(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mt-1",children:a.description})]}),M.includes(a.id)&&(0,b.jsx)(j.CheckCircle2,{className:"w-5 h-5 text-[var(--primary)]"})]})},a.id))}),0===M.length&&(0,b.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-900",children:[(0,b.jsx)(h.AlertCircle,{className:"w-4 h-4 inline mr-1"}),"Select at least one asset class to copy"]})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(k.Button,{onClick:()=>r("risk"),variant:"outline",className:"flex-1",children:"Back"}),(0,b.jsx)(k.Button,{onClick:()=>r("review"),className:"flex-1",disabled:0===M.length,children:"Review Settings"})]})]}),"review"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Review Your Settings"}),(0,b.jsxs)(l.Card,{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-sm text-[var(--muted-foreground)]",children:"Allocation"}),(0,b.jsx)("p",{className:"text-lg",children:T()}),(0,b.jsxs)("p",{className:"text-sm text-[var(--muted-foreground)]",children:["Max position: $",A.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"border-t border-[var(--border)] pt-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm text-[var(--muted-foreground)]",children:"Risk Management"}),(0,b.jsxs)("ul",{className:"text-sm space-y-1 mt-2",children:[(0,b.jsxs)("li",{children:["Stop-loss: ",E?"Copy leader":`Custom ${I}%`]}),(0,b.jsxs)("li",{children:["Take-profit: ",G?"Copy leader":`Custom ${K}%`]}),C&&(0,b.jsxs)("li",{children:["Stop copying after ",C,"% loss"]}),(0,b.jsxs)("li",{children:["Max risk per trade: ",O,"%"]}),Q&&(0,b.jsx)("li",{children:"Trailing stop-loss enabled"})]})]}),(0,b.jsxs)("div",{className:"border-t border-[var(--border)] pt-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm text-[var(--muted-foreground)]",children:"Asset Classes"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:M.map(a=>{let c=n.find(b=>b.id===a);return(0,b.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-[var(--primary)] bg-opacity-10 text-[var(--primary)] border border-[var(--primary)]",children:c?.name},a)})})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(k.Button,{onClick:()=>r("assets"),variant:"outline",className:"flex-1",children:"Back"}),(0,b.jsx)(k.Button,{onClick:S,className:"flex-1",disabled:s,children:s?"Saving...":p?"Update Settings":"Start Copying"})]})]}),"processing"===q&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(j.CheckCircle2,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Settings Saved!"}),(0,b.jsxs)("p",{className:"text-[var(--muted-foreground)]",children:["You're now copying ",e,"'s trades"]})]})]})]})}):null}}];

//# sourceMappingURL=src_components_copy_copy-settings-modal_tsx_9cb8cd06._.js.map