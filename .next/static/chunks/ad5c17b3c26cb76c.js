(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95468,e=>{"use strict";e.s(["CheckCircle2",()=>r],95468);let r=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},25652,e=>{"use strict";e.s(["TrendingUp",()=>r],25652);let r=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},63209,e=>{"use strict";e.s(["AlertCircle",()=>r],63209);let r=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},99749,e=>{"use strict";function r(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}e.s(["_",()=>r])},55838,(e,r,s)=>{"use strict";var t=e.r(71645),a="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},c=t.useState,l=t.useEffect,n=t.useLayoutEffect,i=t.useDebugValue;function o(e){var r=e.getSnapshot;e=e.value;try{var s=r();return!a(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var s=r(),t=c({inst:{value:s,getSnapshot:r}}),a=t[0].inst,d=t[1];return n(function(){a.value=s,a.getSnapshot=r,o(a)&&d({inst:a})},[e,s,r]),l(function(){return o(a)&&d({inst:a}),e(function(){o(a)&&d({inst:a})})},[e]),i(s),s};s.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:d},2239,(e,r,s)=>{"use strict";r.exports=e.r(55838)},18566,(e,r,s)=>{r.exports=e.r(76562)},15288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>n,"CardHeader",()=>c,"CardTitle",()=>l]);var r=e.i(43476),s=e.i(71645),t=e.i(75157);let a=s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("rounded-3xl border-2 border-[#00FFF030] bg-black text-white shadow-lg hover:border-[#00FFF0] hover:shadow-[0_0_40px_rgba(0,255,240,0.3)] transition-all duration-300",a),...c})});a.displayName="Card";let c=s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a),...c})});c.displayName="CardHeader";let l=s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("font-black leading-none tracking-tight text-white uppercase",a),...c})});l.displayName="CardTitle";let n=s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("text-sm text-gray-400",a),...c})});n.displayName="CardDescription";let i=s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("p-6 pt-0",a),...c})});i.displayName="CardContent",s.forwardRef((e,s)=>{let{className:a,...c}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a),...c})}).displayName="CardFooter"},98919,e=>{"use strict";e.s(["Shield",()=>r],98919);let r=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},39312,e=>{"use strict";e.s(["Zap",()=>r],39312);let r=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},20077,e=>{"use strict";e.s(["default",()=>x]);var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(80204),c=e.i(19455),l=e.i(15288),n=e.i(95468),i=e.i(31278),o=e.i(63209),d=e.i(25652),m=e.i(98919),u=e.i(39312);function x(){let e=(0,t.useRouter)(),{user:x}=(0,a.useUser)(),[h,p]=(0,s.useState)("welcome"),[f,j]=(0,s.useState)(!1),[y,g]=(0,s.useState)(null),[v,N]=(0,s.useState)(null),[b,w]=(0,s.useState)(null),[C,k]=(0,s.useState)([]),[S,T]=(0,s.useState)([]),[E,A]=(0,s.useState)(null),[R,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{if("welcome"===h){let e=setTimeout(()=>{O()},2e3);return()=>clearTimeout(e)}},[h]),(0,s.useEffect)(()=>{if("connect"===h&&b){let e=setInterval(()=>{P()},3e3);return()=>clearInterval(e)}},[h,b]);let O=async()=>{j(!0),g(null);try{let e=await fetch("/api/snaptrade/register",{method:"POST"}),r=await e.json();if(!r.success)throw Error(r.error||"Failed to register with SnapTrade");N(r.data.userId),p("register"),setTimeout(()=>{L()},1500)}catch(e){g(e instanceof Error?e.message:"Registration failed")}finally{j(!1)}},L=async()=>{j(!0),g(null);try{let e=await fetch("/api/snaptrade/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({immediateRedirect:!0,connectionType:"trade"})}),r=await e.json();if(!r.success)throw Error(r.error||"Failed to generate connection URL");w(r.data.redirectUri),p("connect")}catch(e){g(e instanceof Error?e.message:"Connection failed")}finally{j(!1)}},z=()=>{k([]),T([]),A(null),p("role-selection")},B=()=>{if(!b)return;let e=window.screen.width/2-400,r=window.screen.height/2-300;window.open(b,"SnapTrade Connection","width=".concat(800,",height=").concat(600,",left=").concat(e,",top=").concat(r))},P=async()=>{try{let e=await fetch("/api/snaptrade/accounts"),r=await e.json();r.success&&r.data.hasConnectedAccounts&&(k(r.data.accounts),T(r.data.authorizations||[]),p("select-account"))}catch(e){console.error("Error checking accounts:",e)}},U=async()=>{if(E){j(!0),g(null);try{let e=C.find(e=>e.id===E);if(!e)throw Error("Account not found");let r=S.length>0?S[0].id:e.id,s=await fetch("/api/snaptrade/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e.id,authorizationId:r})}),t=await s.json();if(!t.success)throw Error(t.error||"Failed to select account");p("role-selection")}catch(e){g(e instanceof Error?e.message:"Account selection failed")}finally{j(!1)}}},D=async()=>{if(R){j(!0),g(null);try{let r=await fetch("/api/user/role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:R})}),s=await r.json();if(!s.success)throw Error(s.error||"Failed to set role");p("complete"),setTimeout(()=>{"leader"===R?e.push("/leader"):e.push("/dashboard")},2e3)}catch(e){g(e instanceof Error?e.message:"Role selection failed")}finally{j(!1)}}};return(0,r.jsx)("div",{className:"min-h-screen bg-[var(--background)] flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsx)(l.Card,{className:"border-2",children:(0,r.jsxs)(l.CardContent,{className:"p-8",children:[y&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-[var(--danger-bg)] border border-[var(--danger)] rounded-lg flex items-start gap-3",children:[(0,r.jsx)(o.AlertCircle,{className:"w-5 h-5 text-[var(--danger)] mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-[var(--foreground)]",children:"Error"}),(0,r.jsx)("p",{className:"text-sm text-[var(--foreground-secondary)]",children:y})]})]}),(()=>{switch(h){case"welcome":return(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[var(--primary)] bg-opacity-10",children:(0,r.jsx)(d.TrendingUp,{className:"w-8 h-8 text-[var(--primary)]"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to TradeOS!"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Let's get you set up in just a few steps"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(i.Loader2,{className:"w-6 h-6 animate-spin text-[var(--primary)]"})})]});case"register":return(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-16 h-16 mx-auto text-[var(--success)]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Account Created!"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Preparing your brokerage connection..."})]}),(0,r.jsx)(i.Loader2,{className:"w-6 h-6 mx-auto animate-spin text-[var(--primary)]"})]});case"connect":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(m.Shield,{className:"w-16 h-16 mx-auto mb-4 text-[var(--primary)]"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Connect Your Brokerage"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)] mb-6",children:"Securely link your brokerage account to start trading"})]}),(0,r.jsx)(l.Card,{className:"border-2 border-dashed",children:(0,r.jsx)(l.CardContent,{className:"pt-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Bank-level encryption"}),(0,r.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Your credentials are never stored on our servers"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Read-only access option"}),(0,r.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Choose between read-only or full trading permissions"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-5 h-5 text-[var(--success)] mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Revoke anytime"}),(0,r.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:"Disconnect your account at any time from settings"})]})]})]})})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c.Button,{onClick:B,disabled:!b,className:"w-full",size:"lg",children:b?"Connect Brokerage Account":"Generating Connection..."}),(0,r.jsx)(c.Button,{onClick:z,variant:"outline",className:"w-full",size:"lg",children:"Skip for now - I'll connect later"})]}),b&&(0,r.jsx)("p",{className:"text-xs text-center text-[var(--foreground-muted)]",children:"A new window will open. Return here after connecting your account."}),(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,r.jsx)(o.AlertCircle,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[(0,r.jsx)("strong",{children:"Note:"})," Trading features require a connected brokerage account. You can connect one later from your dashboard settings."]})]})]});case"select-account":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Accounts Connected!"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Select your primary trading account"})]}),(0,r.jsx)("div",{className:"space-y-3",children:C.map(e=>{var s,t,a,c,n,i,o;return(0,r.jsx)(l.Card,{className:"cursor-pointer transition-all ".concat(E===e.id?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"),onClick:()=>A(e.id),children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:(null==(s=e.meta)?void 0:s.institution_name)||e.name}),(0,r.jsxs)("p",{className:"text-sm text-[var(--foreground-muted)]",children:[e.type," •••",null==(t=e.number)?void 0:t.slice(-4)]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold",children:["$",(null==(n=e.balance)||null==(c=n.total)||null==(a=c.amount)?void 0:a.toLocaleString())||"0.00"]}),(0,r.jsx)("p",{className:"text-xs text-[var(--foreground-muted)]",children:(null==(o=e.balance)||null==(i=o.total)?void 0:i.currency)||"USD"})]})]})})},e.id)})}),(0,r.jsx)(c.Button,{onClick:U,disabled:!E||f,className:"w-full",size:"lg",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Continue"})]});case"role-selection":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u.Zap,{className:"w-16 h-16 mx-auto mb-4 text-[var(--primary)]"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Path"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"How do you want to use TradeOS?"})]}),0===C.length&&(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,r.jsx)(o.AlertCircle,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:"You haven't connected a brokerage account yet. You can still select your role and connect an account later from your settings to enable trading features."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(l.Card,{className:"cursor-pointer transition-all ".concat("leader"===R?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"),onClick:()=>F("leader"),children:[(0,r.jsxs)(l.CardHeader,{children:[(0,r.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(d.TrendingUp,{className:"w-5 h-5"}),"Leader"]}),(0,r.jsx)(l.CardDescription,{children:"Share your trades with followers"})]}),(0,r.jsx)(l.CardContent,{children:(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Trade freely and earn from followers"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Build your trading reputation"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Access advanced analytics"})]})]})})]}),(0,r.jsxs)(l.Card,{className:"cursor-pointer transition-all ".concat("follower"===R?"border-[var(--primary)] border-2 bg-[var(--primary)] bg-opacity-5":"hover:border-[var(--primary)] hover:border-opacity-50"),onClick:()=>F("follower"),children:[(0,r.jsxs)(l.CardHeader,{children:[(0,r.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Shield,{className:"w-5 h-5"}),"Follower"]}),(0,r.jsx)(l.CardDescription,{children:"Copy successful traders automatically"})]}),(0,r.jsx)(l.CardContent,{children:(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Automated trade copying"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Risk management controls"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-4 h-4 text-[var(--success)] mt-0.5"}),(0,r.jsx)("span",{children:"Follow multiple leaders"})]})]})})]})]}),(0,r.jsx)(c.Button,{onClick:D,disabled:!R||f,className:"w-full",size:"lg",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Setting up..."]}):"Complete Setup"})]});case"complete":return(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)(n.CheckCircle2,{className:"w-20 h-20 mx-auto text-[var(--success)]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"All Set!"}),(0,r.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Redirecting you to your dashboard..."})]}),(0,r.jsx)(i.Loader2,{className:"w-6 h-6 mx-auto animate-spin text-[var(--primary)]"})]});default:return null}})(),(0,r.jsx)("div",{className:"mt-8 flex items-center justify-center gap-2",children:["welcome","register","connect","select-account","role-selection","complete"].map((e,s)=>(0,r.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(e===h?"w-8 bg-[var(--primary)]":s<["welcome","register","connect","select-account","role-selection","complete"].indexOf(h)?"w-2 bg-[var(--primary)]":"w-2 bg-[var(--border)]")},e))})]})})})})}}]);